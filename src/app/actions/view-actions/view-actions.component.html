<hydro-page-wide>
  <hydro-headline>Actions</hydro-headline>

  <div class="toolbar">
    <mat-form-field class="filter">
      <mat-label>Filter Action Types</mat-label>
      <mat-select
        [(value)]="selectedActionType"
        (selectionChange)="filterActions()"
      >
        <mat-option>All Action Types</mat-option>
        <mat-option value="block">Block</mat-option>
        <mat-option value="emailAlert">Email Alert</mat-option>
        <mat-option value="emailRate">Email Rate</mat-option>
        <mat-option value="emailBatch">Email Batch</mat-option>
      </mat-select>
    </mat-form-field>

    <hydro-search-input
      [(searchTerm)]="searchTerm"
      [placeHolder]="'Search Actions'"
      (searchTermChange)="filterActions()"
      class="search"
    ></hydro-search-input>

    <hydro-button-raised
      (click)="router.navigateByUrl('/actions/add')"
      color="accent"
    >
      Add New Action
    </hydro-button-raised>
  </div>

  <hydro-list>
    <cdk-virtual-scroll-viewport itemSize="72" class="scroll-viewport">
      <ng-container *cdkVirtualFor="let action of filteredActions">
        <hydro-list-item>
          <div>
            <h1 class="action-name">
              {{ action.name }}
            </h1>
            <p class="action-description">
              {{ action.description }}
            </p>
          </div>
          <span class="action-type">
            {{ actionTypeDisplayNames[action.actionType] }} Action
          </span>

          <div class="menu">
            <button
              mat-stroked-button
              [matMenuTriggerFor]="menu"
              color="primary"
            >
              <span>
                Menu
              </span>
            </button>

            <mat-menu #menu="matMenu">
              <div>
                <a mat-menu-item routerLink="/actions/{{ action.id }}/edit">
                  <mat-icon>edit</mat-icon>
                  <span>
                    Edit Action
                  </span>
                </a>

                <button mat-menu-item (click)="archiveAction(action.id)">
                  <mat-icon>archive</mat-icon>
                  <span>
                    Archive Action
                  </span>
                </button>
              </div>
            </mat-menu>
          </div>
        </hydro-list-item>
      </ng-container>
    </cdk-virtual-scroll-viewport>
  </hydro-list>
</hydro-page-wide>
